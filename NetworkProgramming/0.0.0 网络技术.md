# 网络技术

ARPANET 建成标志着计算机网络的出现，ARPANET 是美国国防部筹建。ARPANET 采用分组交换技术，可以连接不同型号的计算机。为了解决不同网络类型中的分组结构、通信机制及传输速率等不一致的问题，出现了 TCP/IP 模型。其中 TCP（Transport Control Protocol）负责分布式进程通信，IP 负责分组转发路由。TCP/IP 属于P2P（点对点）式网络。

网络按覆盖范围分类：

* LAN（Local Area Network，局域网）：最常用的是共享信道，即所有设备都连接在同一条传输线路上。新型LAN主要采用星型拓扑，并遵循 IEEE 802.3 协议标准的以太网（Ethernet），而 WLAN（无线局域网）逐步取代 LAN。
* MAN（Metropolitan Area Network，城域网）：技术跟 LAN 差不多，只包含一两根电缆，以总线形式存在，没有交换设备，遵循 IEEE 802.6 协议，目前很多也采用 Ethernet 技术，跟 LAN 差别不明显。
* WAN（Wide Area Network，广域网）：采用交换技术，通过交换结点（即通信子网）连接分布在各地的主机或局域网连接。数据交换是 WAN 核心，目前主要使用**帧中继**和**ATM**等。而担任通信子网的设备通常是路由器或交换机。
* Inter Networking（互联网）：将世界各地局域网和广域网连接起来的方式。不同厂家生产的网络设备协议标准不同，必须要通过**网关（Gateway）**设备连接起来，完成数据转换功能。

拓扑结构形式：

* 总线拓扑：所有终端连接在一根线路上，同一时刻只能有两个结点通信。一个地方故障，整个网络瘫痪。
* 环形拓扑：封闭的环形线路，优点是通信最大延迟固定。一个地方故障，整个网络瘫痪。
* 星型拓扑：一台数据设备作为中心处理系统，其他结点不能直接通信，必须通过中心处理机转发。缺点是成本高。
* 树形拓扑：星型结构的特例，经过多级处理主机分层相连，每层一个中心处理机。比星型结构省线路成本。
* 网状拓扑：终端可以任意互联，结点可以直接通信，也可经过其他结点转接。缺点是结构复杂，不易管理。

网络逻辑功能：

* 通信子网：负责完成网络数据的传输、转发、交换和路由等任务，由通信处理机、通信线路和其他网络设备构成。
* 资源子网：负责网络数据处理业务，向网络用户提供资源和服务，由主机、终端、联网的外设、软件和信息资源构成。

* Switch（交换机）：负责**网络内部**数据的调度和转发，交换机通过RJ-45或光纤接口与终端相连，并在交换机内部建立地址表，记录终端 MAC 地址和端口关系。
* Router（路由器）：连接 IP 网络中不同类型对网络、为不同格式的数据分组选择合适的通信路径并转发的网络中间设备。这种为数据分组选择合适路径的行为就是 Routing（路由），实现路由的方法就是 Routing Algorithm（路由算法）。路由表用于选择转发路径，可以对应固定的静态路由算法，也可以对应动态路由算法。
  * Switch 是实现某种网络内部的数据存储转发，而 Router 是在不同网络之间实现数据的路由和中转。
  * Router 除了 Routing 外，还可以进行网络流量控制、负载均衡、拥塞控制和安全管理。

## 数据通信基础

```txt
[信源] --> [发送设备] --> [信道] --> [接收设备] --> [信宿]
                          |
                       [噪声源]
```

* 信源：将消息转换为电信号的设备，如电话机、摄像机、计算机
* 发送设备：编码和调制信源信号，以适于在信道中传输。
* 信道：传输媒介，分为有线信道、无线信道。如双绞线、同轴电缆、光纤、大气层和外层空间。
* 信宿：将信号转换为人们可以识别的消息。
* Message 消息：是确定的、如文字、气味、图像等。
* Information 信息：抽象等，消息是信息的载体。信息是对事物状态或存在方式对不确定性表述。信息是可以度量的，其大小根据消息的不确定性，即概率成反比。
  * 某件事发生的概率越大，其产生的信息量越小；反之越大。
* Communication 通信：在一点精确或近似地再生另一点的信息。
* Signal 信号：传输信息的载体，通常以电磁或光形式存在，并利用电平、电流和频率等表示信息。信号分为连续信号和离散信号。
* 模拟信号：信号因变量完全随连续消息的变化而变化的信号，自变量可以是连续的，也可以是离散的，但因变量一定是连续的。传统的电视图像信号、电话语音信号、传感器输出信号、遥感遥测信号都是模拟信号。
  * 模拟信号容易受到干扰
* 数字信号：消息因变量是离散的（状态有限），自变量时间的取值也是离散的信号。计算机数据、数字电话、数字电视都是数字信号。
  * 模拟信号可以通过采样、编码转换成数字信号，而数字信号也可以解码、平滑恢复为模拟信号。

### 数据传输方式

计算机作为信源所发出的原始数据信号称为**基本频带信号**（简称**基带信号**），即用固定高低电平来表示二进制。基带信号频率低，信号频谱一般从零频或零频附近开始，功率剧中在有限的频带，具有**低通特性**。不适合长距离或无线传输。直接在信道中传送基带信号，称为**基带传输**，Ethernet、令牌环网等局域网均采用基带传输。

无线信道不具有低通特性，而具有**带通特性**。需要利用基带信号调制与信道匹配的**载波信号**传输，即**频带传输**。

数字基带信号调制方法：

* AM（调幅）：载波的振幅随数字基带信号变化，如 0 无载波，1 有载波。
* FM（调频）：载波的频率随数字基带信号变化，如 0 和 1 对应不同的载波频率 f0 和 f1。
* PM（调相）：载波的初始相位随数字基带信号变化，如 0 表示 0 度，1 表示 180 度。
* QAM（正交幅值调制）、OFDM（正交频分复用）等调制技术可以获得更高等信息传输速率。

* 单工：任何时间只能一个方向通信，如无线电广播；
* 半双工：接收和发送交替，不能双方同时接收或发送。如无线对讲机、HTTP 1.1协议。
* 全双工：如 HTTP 2.0协议、电话网、计算机网络等。
* 并行通信：每次 1 byte（8 bit）数据同时传输，共8条通道。造价贵，不适合长距离传输。如计算机与存储通信等总线传输。
* 串行通信：只有一条通道，数据每bit依次在这条通道传输。价格便宜，适合长距离传输。如计算机外设、RS-232 接口、USB 接口就是串口。

### 数据通信系统性能

* 模拟信号：
  * 有效性：带宽（包括信道带宽和信号传输带宽）
  * 可靠性：信噪比（接收端有用信号的功率和噪声功率的比），越高表示越可靠
* 数字信号：
  * 有效性：传输速率（包括波特率和比特率）和频带利用率
    * 波特率（即码元速率） $R_B = frac{{1}{T}}$ 时间间隔相同的符号表示一个离散值，这个时间间隔内的信号称为**码元**，时间间隔长度称为**码元长度**。波特率表示每秒传输码元数，单位是Baud（波特）。$T(s)$ 表示码元长度。
    * 比特率（即信息速率） $R_b = {R_B}{log_2}M$ 每秒传输二进制比特数，单位 `bit/s`。每个码元含有若干比特，一个二进制码元只包含1 bit信息量，一个M进制码元携带 ${log_2}M$ 比特信息量。如某八进制信号，波特率为1200Baud，那么信息速率为3600bit。